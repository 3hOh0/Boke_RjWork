{% extends "dashboard/pages/base_page.html" %}
{% load static %}

{% block nav_engagement %}active{% endblock %}

{% block page_content %}
<h3 class="mb-4" style="color: white; font-weight: 700;">ğŸ’¬ ç”¨æˆ·äº’åŠ¨åˆ†æ</h3>

<div class="row g-4">
  <!-- ç‚¹èµè¶‹åŠ¿ -->
  <div class="col-lg-6">
    <div class="stat-card">
      <div class="stat-card-header">
        <h5 class="stat-card-title">
          <span class="stat-card-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">â¤ï¸</span>
          ç‚¹èµè¶‹åŠ¿
        </h5>
        <select id="like-range-select" class="form-select form-select-sm" style="width: 120px;">
          <option value="7">è¿‘7å¤©</option>
          <option value="30">è¿‘30å¤©</option>
        </select>
      </div>
      <div class="chart-container" style="height: 300px;">
        <canvas id="like-trend-chart"></canvas>
      </div>
    </div>
  </div>
  
  <!-- æ”¶è—è¶‹åŠ¿ -->
  <div class="col-lg-6">
    <div class="stat-card">
      <div class="stat-card-header">
        <h5 class="stat-card-title">
          <span class="stat-card-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">â­</span>
          æ”¶è—è¶‹åŠ¿
        </h5>
        <select id="favorite-range-select" class="form-select form-select-sm" style="width: 120px;">
          <option value="7">è¿‘7å¤©</option>
          <option value="30">è¿‘30å¤©</option>
        </select>
      </div>
      <div class="chart-container" style="height: 300px;">
        <canvas id="favorite-trend-chart"></canvas>
      </div>
    </div>
  </div>
  
  <!-- è¯„è®ºè¶‹åŠ¿ -->
  <div class="col-lg-12">
    <div class="stat-card">
      <div class="stat-card-header">
        <h5 class="stat-card-title">
          <span class="stat-card-icon" style="background: linear-gradient(135deg, #10b981, #059669); color: white;">ğŸ’¬</span>
          è¯„è®ºè¶‹åŠ¿
        </h5>
        <select id="comment-range-select" class="form-select form-select-sm" style="width: 120px;">
          <option value="7">è¿‘7å¤©</option>
          <option value="30">è¿‘30å¤©</option>
        </select>
      </div>
      <div class="chart-container" style="height: 300px;">
        <canvas id="comment-trend-chart"></canvas>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'dashboard/charts_pages.js' %}"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  loadLikeTrendChart();
  loadFavoriteTrendChart();
  loadCommentTrendChart();
  
  document.getElementById("like-range-select").addEventListener("change", (e) => {
    loadLikeTrendChart(parseInt(e.target.value, 10));
  });
  
  document.getElementById("favorite-range-select").addEventListener("change", (e) => {
    loadFavoriteTrendChart(parseInt(e.target.value, 10));
  });
  
  document.getElementById("comment-range-select").addEventListener("change", (e) => {
    loadCommentTrendChart(parseInt(e.target.value, 10));
  });
});
</script>
{% endblock %}
